<html>
  <head>
    <meta charset="utf-8">
    <title>Demo</title>
    <style type="text/css" media="screen">
    	.alerta {color:red}
    </style>
  </head>
  <body>
    <a href="http://jquery.com/">jQuery</a>
   <p>Un texto</p>
   <button>Acci√≥n</button>
    <script src="jquery-1.6.1.js"></script>
    <script>$(document).ready(function(){
    	function pesada(texto){
		var def=$.Deferred();
		console.log("Haciendo muchas cosas con " +texto);
		setTimeout(function(){
			console.log("Finalizado hacer cosas con " +texto);
			def.resolve();
		},1000);
		return def.promise();
	}
    	function alertar(){
		console.log("alertando");
		$('p').addClass('alerta');
	}
	function finAlerta(){
		console.log("Fin de alertando");
	    $('p').removeClass('alerta');
	}

	$('button').bind('click',function(){
		console.log('click');
		$.when(pesada("Una cantidad de datos increible"),alertar()).done(function(){finAlerta();});

	});	

 });</script>
  </body>
</html>
