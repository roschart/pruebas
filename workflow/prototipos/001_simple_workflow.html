<!DOCTYPE html>
<html>
<head>
    <title>Simple Work Flow</title>
    <script src="../scripts/jquery-1.7.1.js.rb.js" type="text/javascript"></script>
    <script src="workflow.js" type="text/javascript"></script>
    <script src="../scripts/jquery.tmpl.min.js.rb.js" type="text/javascript"></script>
    <link rel="stylesheet" href="../css/style.css" type="text/css" />
</head>
<body>

    <h1>Contenido dinámico generado a partir del json</h1>
    <div id="workflow"></div>

    <script id="stageTemplate" type="text/x-jquery-tmpl">
        <div id=${id} class="stage">
            <div class="stage_head">
                <span>${title}</span>
            </div>
            <div class="stage_body">
                {{tmpl(tasks) "#tasksTemplate"}}
            </div>
        </div>

    </script>
    <script id="tasksTemplate" type="text/x-jquery-tmpl">
        <div id=${id} class="task">
            <div class="task_message">${title}</div>
            <div class="task_actions">Done</div>
        </div>

    </script>
    <script type="text/javascript">
        var workflow = {
            stages: [{
                id: 'stage_001',
                title: 'Nuevo Contrato JSON',
                tasks: [
                { id: '005', title: 'ContratoJSON 005' },
                { id: '004', title: 'ContratoJSON 004' }
                ]
            },
            {
                id: 'stage_002',
                title: 'Preparar Orden de trabajo JSON',
                tasks: [
                { id: '001', title: 'ContratoJSON 001' },
                { id: '006', title: 'ContratoJSON 006' }
                ]
            },
               {
                   id: 'stage_003',
                   title: 'En Proceso Instalación',
                   tasks: [
                { id: '002', title: 'ContratoJSON 002' },
                { id: '009', title: 'ContratoJSON 009' }
                ]
               }

            ]
        }

        $("#workflow").workFlow(workflow);

    </script>
</body>
</html>
